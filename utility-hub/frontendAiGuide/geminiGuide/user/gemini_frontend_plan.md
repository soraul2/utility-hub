# 프론트엔드 인증 구현 및 로그인 페이지 계획서

이 문서는 Gemini 팀이 Utility Hub 프론트엔드 인증 및 로그인 시스템을 구축하기 위한 계획과 산출물 명세를 정의합니다.

---

## 1. 프론트엔드 인증 구현 계획

### 1.1 아키텍처 설계
- **상태 관리**: `AuthContext`를 통해 전역적으로 로그인 상태를 유지하며, 에러 상태 관리 기능을 포함합니다.
- **토큰 플로우**:
    1. 사용자가 소셜 로그인 버튼 클릭 → 현재 경로를 `sessionStorage`에 저장 후 백엔드 리다이렉트
    2. 소셜 인증 완료 후 프론트엔드 콜백으로 복귀 (`AuthCallbackPage`, Port: 5173)
    3. 프론트엔드에서 백엔드 로그인 API 호출 후 토큰 수신 및 저장
    4. `sessionStorage`에 저장된 이전 경로로 안전하게 복구 (Open Redirect 방지)
- **자동 갱신 및 대기**: Axios Interceptor를 사용하여 401 에러 시 토큰을 갱신합니다. 갱신 중 발생하는 요청들은 큐에 저장되어 갱신 완료 후 일괄 재시도됩니다.
- **권한 제어**: `ProtectedRoute`를 통해 단순 인증 여부뿐만 아니라 Role 기반(Admin/User) 접근 제어를 수행합니다.

### 1.2 로그인 페이지 구성 방식
- **위치**: `/login` (LoginPage.tsx)
- **디자인 컨셉**:
    - **Premium Vibe**: Glassmorphism 디자인 적용, 부드러운 애니메이션 및 다크 모드 최적화.
    - **소셜 로그인**: 네이버, 구글 브랜드 가이드라인을 준수한 세련된 버튼 배치.
    - **UX/DX**: 이전 페이지 복원 기능, 상세 에러 메시지 출력, 타입 안전성 확보.
- **반응형**: 모바일과 데스크톱 모두에서 최적화된 레이아웃.

---

## 2. Gemini 팀 산출물 명세 (`frontendAiGuide/geminiGuide/user`)

Gemini 팀은 다음 산출물을 순차적으로 생성하고 유지 관리합니다.

### 2.1 구현 계획서 (`implementation_plan.md`)
- 기술 스택, 컴포넌트 구조, 상세 구현 단계 및 검증 방안을 기술합니다.

### 2.2 작업 리스트 (`task.md`)
- 작업의 세부 단계를 정의하고 실시간 진행 상황을 체크리스트 형태로 관리합니다.

### 2.3 프론트엔드 결과 보고서 (`walkthrough_frontend.md`)
- 구현 완료 후 실제 동작 화면, 테스트 결과, 코드 하이라이트를 포함한 최종 보고서입니다.

### 2.4 기술 명세 및 가이드 (`gemini_frontend_spec.md`)
- 프론트엔드에서 사용되는 인증 타입 정의, 에러 코드 처리 가이드, 컴포넌트 사용법 등을 정리합니다.

---

## 3. 상세 구현 단계

1.  **인프라 설정**: `AuthContext`, `tokenStorage`, Axios 인스턴스 구축.
2.  **페이지 구현**: `LoginPage` UI 및 `AuthCallbackPage` 로직 작성.
3.  **보안 적용**: `ProtectedRoute` 및 자동 토큰 갱신 기능(401 interceptor) 연동.
4.  **UX 최적화**: 로딩 스피너, 에러 토스트, 로그아웃 기능 추가.
5.  **검증**: 실제 소셜 로그인 흐름 및 세션 유지 테스트 수행.

---
*작성자: Gemini (Antigravity)*
*최종 업데이트: 2026-02-04*
